<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init
option=0;
options=5;
soptions[0]=4;
soptions[1]=2;
soptions[2]=2;
soptions[3]=0;
soptions[4]=0;
ini_open(working_directory+"settings.ini") {
    soption[0]=ini_read_real("main","windowsize",1);
    soption[1]=ini_read_real("main","shaders",1)+1;
    soption[2]=ini_read_real("main","fullscreen",1)+1;
    ini_close();
}
soption[0]=1;
soption[1]=1;
soption[2]=1;
soption[3]=0;
soption[4]=0;
otext[0,0]="Window Size";
    otext[0,1]="1x";
    otext[0,2]="2x";
    otext[0,3]="3x";
    otext[0,4]="4x";
otext[1,0]="Shaders";
    otext[1,1]="off";
    otext[1,2]="on";
otext[2,0]="Fullscreen";
    otext[2,1]="off";
    otext[2,2]="on";
otext[3,0]="Delete save data";
otext[4,0]="Save and return";
fade=1;
fadeinout=1;

//Transition
background_alpha[2]=0;
background_visible[2]=1;
transition=1;

//Sound
audio_stop_sound(bgmFNAFtitle);
audio_play_sound(bgsOfficeFan,90,1);

//Dialouge handling
save=0;
del=0;
deli=0;
pixelate=0;
tex_pixel_size = shader_get_uniform(shdMosaic, "f_SpritePixelSize");
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>background_visible[2]=0;
audio_stop_sound(bgsOfficeFan);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Revert to failsafe
with objDialouge { instance_destroy(); }
window_set_size(544,416);
display_set_gui_maximise(1,1,0,0);
soption[0]=1;
global.shaders=0;
soption[1]=1;
window_set_fullscreen(0);
soption[2]=1;
window_center();
audio_play_sound(snddoorclose,90,0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Transition into room and handle user input
if background_alpha[2]&lt;1 &amp;&amp; transition == 1 {
    background_alpha[2]=background_alpha[2]+0.05;
}
if transition == 0 {
    background_alpha[2]=background_alpha[2]-0.05;
}
if background_alpha[2]==0 {
    instance_create(0,288,ctrlIntro);
    instance_destroy();
}
if save {
    if global.input==0 {
        ini_open(working_directory+"settings.ini") {
            ini_write_real("main","windowsize",soption[0]);
            ini_write_real("main","shaders",soption[1]-1);
            ini_write_real("main","fullscreen",soption[2]-1);
            ini_close();
        }
        global.input=-1;
        transition=0;
    }
    if global.input==1 {
        global.input=-1;
        transition=0;
        alarm[0]=0;
    }
}
if del&amp;&amp;keyboard_check(vk_delete) {
    if deli&gt;room_speed*3 {
        audio_play_sound(sndgoldenfreddylaugh,100,0);
        pixelate=10;
        file_delete(working_directory+"slot1.fnafb");
        file_delete(working_directory+"slot2.fnafb");
        file_delete(working_directory+"slot3.fnafb");
        file_delete(working_directory+"slot4.fnafb");
        file_delete(working_directory+"slot1.meta");
        file_delete(working_directory+"slot2.meta");
        file_delete(working_directory+"slot3.meta");
        file_delete(working_directory+"slot4.meta");
        deli=-1;
        del=0;
        if instance_exists(objDialouge) {
            with(objDialouge) { instance_destroy(); }
        }
    }
    deli++
}
if pixelate&gt;0 {
    pixelate-=0.25;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Mouse controls
if os_windows||os_linux||os_macosx||os_unknown {
    //Do mouse related stuff
    var i=0;
    repeat(options) {
        if mouse_y&gt;128+(i*24)&amp;&amp;mouse_y&lt;128+((i+1)*24) {
            if option!=i {
                option=i;
                audio_play_sound(sndblip3,90,0);
            }
        }
        i++;
    }
    if mouse_check_button_pressed(mb_left)&amp;&amp;mouse_y&gt;y&amp;&amp;mouse_y&lt;128+options*24 {
        event_perform(ev_keypress,vk_enter);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw menu
if shader_is_compiled(shdMosaic) &amp;&amp; pixelate&gt;0 {
    var texture = sprite_get_texture(sprGolden_Freddy,0);
    texel_width = texture_get_texel_width(texture);
    texel_height = texture_get_texel_height(texture);
    shader_set(shdMosaic);
    shader_set_uniform_f(tex_pixel_size, texel_width, texel_height, abs(pixelate-10));
    draw_set_alpha(pixelate/10);
    draw_sprite(sprGolden_Freddy,0,200,200);
    shader_reset();
}

var i=0;
if fade==0.5 { fadeinout=0; }
if fade==1 {fadeinout=1; }
if fadeinout==1 { fade=fade-0.05; }
if fadeinout==0 { fade=fade+0.05; }
draw_set_color(c_white);
draw_set_halign(fa_left);
draw_set_font(fntMain);
draw_set_alpha(background_alpha[2]);
draw_text(16,16,"Settings");
repeat(options) {
    draw_text(16,128+(i*24),otext[i,0]);
    if option == i {
        draw_set_alpha(background_alpha[2]*fade);
        draw_line(16,144+(i*24),128,144+(i*24));
        draw_set_alpha(background_alpha[2]);
    }
    ix=140;
    is=1;
    repeat(soptions[i]) {
        if soption[i]!=is {
            draw_set_colour(c_gray);
        }
        draw_text(16+ix,128+(i*24),otext[i,is]);
        ix+=string_width(otext[i,is])+8;
        is++;
        draw_set_colour(c_white);
    }
    i++;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !save&amp;&amp;!del {
    option++;
    if option&gt;=options {
        option=0;
    }
    audio_play_sound(sndblip3,90,0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="39">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !save&amp;&amp;!del {
    soption[option]++;
    if soption[option]&gt;soptions[option] {
        soption[option]=1;
    }
    audio_play_sound(sndblip3,90,0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="38">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !save&amp;&amp;!del {
    if option&gt;=1 {
        option--;
    } else {
        option=options-1;
    }
    audio_play_sound(sndblip3,90,0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="37">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !save&amp;&amp;!del {
    soption[option]--;
    if soption[option]&lt;1 {
        soption[option]=soptions[option];
    }
    audio_play_sound(sndblip3,90,0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !save&amp;&amp;!del {
    audio_play_sound(sndwindup2,90,0);
    transition=0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Do a thing
if del {
    if instance_exists(objDialouge) {
        with(objDialouge) { instance_destroy() }
    }
    del=0;
    deli=0;
} else if !save&amp;&amp;!del {
    if option&lt;3 {
        event_perform(ev_keypress,vk_right);
    }
    if option==3 {
        del=1;
        dialouge("To delete all saved data, hold down delete for 3 seconds.",0,0);
    }
    if option==4 {
        save=1;
        window_set_size(544*soption[0],416*soption[0]);
        display_set_gui_maximise(soption[0],soption[0],0,0);
        global.shaders=soption[1]-1;
        window_set_fullscreen(soption[2]-1);
        ctrlMaster.alarm[0]=1;
        dialouge("Do you want to keep these settings? (Settings will revert to failsafe in 10 seconds)",1,2,"Yes","No");
        alarm[0]=room_speed*10;
    }
    audio_play_sound(sndhonk,90,0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
